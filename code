
   
/* 	Adult Table Creation
	Authors: Nicole Pupp, Bret Bodnar, Audray Rong
*/

CREATE TABLE ADULT
( 	Adult_Patient_ID				INT					NOT NULL,
	PrefContact						VARCHAR(15),
    PRIMARY KEY(Adult_Patient_ID),
    FOREIGN KEY (Adult_Patient_ID) REFERENCES PATIENT (Patient_ID)
)

CREATE TABLE ADULT_EMAIL_ADDRESS
( 	Email_Address				VARCHAR(15)			NOT NULL,
	Adult_ID					INT 				NOT NULL,
    PRIMARY KEY(Email_Address, Adult_ID),
    FOREIGN KEY (Adult_ID) REFERENCES ADULT (Adult_Patient_ID)
)

CREATE TABLE ADULT_PHONE_NUM
( 	Phone_Num				CHAR(10)		NOT NULL,
	Adult_ID				INT 			NOT NULL,			
    PRIMARY KEY(Phone_Num, Adult_ID),
    FOREIGN KEY (Adult_ID) REFERENCES ADULT (Adult_Patient_ID)
)

CREATE TABLE ALLERGIES
(	Patient_ID		INT			NOT NULL,
	N_ESSN			CHAR(9)		NOT NULL,
    Allergies		VARCHAR(15),
	PRIMARY KEY(Patient_ID,N_ESSN),
	FOREIGN KEY(Patient_ID) REFERENCES PATIENT(Patient_ID),
    FOREIGN KEY(N_ESSN) REFERENCES NURSE(N_ESSN)
)

CREATE TABLE CHILD
(	Child_Patient_ID		INT		NOT NULL,
	PRIMARY KEY(Child_Patient_ID),
	FOREIGN KEY(Child_Patient_ID) REFERENCES PATIENT(Patient_ID)
)

CREATE TABLE CUR_MED
( 	Patient_ID				INT				NOT NULL,
	N_ESSN					CHAR(9) 		NOT NULL,
    Meds					VARCHAR(15),
    PRIMARY KEY(Patient_ID, N_ESSN),
    FOREIGN KEY (Patient_ID) REFERENCES PATIENT (Patient_ID),
    FOREIGN KEY (N_ESSN) REFERENCES NURSE (N_ESSN)
)

CREATE TABLE DIAGNOSED
( 	Patient_ID			INT					  NOT NULL,
	  ICD_10_CM				INT					  NOT NULL,
    SP_ESSN					CHAR(9)				NOT NULL,
    PRIMARY KEY(Patient_ID, ICD_10_CM, SP_ESSN),
    FOREIGN KEY (ICD_10_CM) REFERENCES DIAGNOSIS (ICD_10_CM),
    FOREIGN KEY (Patient_ID) REFERENCES PATIENT (Patient_ID),
    FOREIGN KEY (SP_ESSN) REFERENCES SERVICE_PROVIDER_DOCTOR (SP_ESSN)
)

CREATE TABLE DIAGNOSIS
( 	ICD_10_CM				INT					NOT NULL,
	DName					VARCHAR(15)			NOT NULL,
    PRIMARY KEY(ICD_10_CM)
)

CREATE TABLE EMPLOYEE
( 	ESSN				CHAR(9)					NOT NULL,
	Employee_ID			INT,
    EFname				VARCHAR(15)				NOT NULL,
    EMname				VARCHAR(15),
    ELname				VARCHAR(15)				NOT NULL,
    PRIMARY KEY(ESSN)
)

CREATE TABLE GUARDIAN_RELATIONSHIP
(	Patient_CID		INT		NOT NULL,
	Parent_ID		INT		NOT NULL,
	PRIMARY KEY(Patient_CID,Parent_ID),
	FOREIGN KEY(Patient_CID) REFERENCES CHILD(Child_Patient_ID),
    FOREIGN KEY(Parent_ID) REFERENCES PARENT_GUARDIAN(Parent_ID)
)

CREATE TABLE INSURANCE_COMPANY
( 	IC_ID				INT					NOT NULL,
	Payer_ID			INT,
    ICname				VARCHAR(15),
    Group_num			INT,
    PRIMARY KEY(IC_ID)
)

CREATE TABLE INTAKE_CLERK
( 	IC_ESSN				CHAR(9)					NOT NULL,
    PRIMARY KEY(IC_ESSN),
    FOREIGN KEY (IC_ESSN) REFERENCES EMPLOYEE (ESSN)
)

CREATE TABLE NURSE
( 	N_ESSN				CHAR(9)					NOT NULL,
    PRIMARY KEY(N_ESSN),
    FOREIGN KEY (N_ESSN) REFERENCES EMPLOYEE (ESSN)
)

CREATE TABLE PARENT_GUARDIAN
( 	Parent_ID			INT					NOT NULL,
	Parent_Fname		VARCHAR(15),
    Parent_Mname		VARCHAR(15),
    Parent_Lname		VARCHAR(15),
    PRIMARY KEY(Parent_ID)
)

CREATE TABLE PATIENT
( 	Patient_ID				INT				NOT NULL,
	Date_of_birth			DATE,
    PFname					VARCHAR(15)		NOT NULL,
    PMname					VARCHAR(15),
    PLname					VARCHAR(15)		NOT NULL,
    Street					VARCHAR(15),
    City					VARCHAR(15),
    State					VARCHAR(15),
    Zipcode					CHAR(5),
    N_ESSN					CHAR(9),
    Height					DECIMAL(5, 2),
    Blood_Pressure			VARCHAR(7),
    Pulse					INT,
    WEIGHT					DECIMAL(5, 2),
    PRIMARY KEY(Patient_ID),
    FOREIGN KEY (N_ESSN) REFERENCES NURSE (N_ESSN)
)

CREATE TABLE PG_PHONE_NUM
( 	Phone_Num			INT					NOT NULL,
	Parent_ID			INT					NOT NULL,
    PRIMARY KEY(Parent_ID, Phone_Num),
    FOREIGN KEY (Parent_ID) REFERENCES PARENT_GUARDIAN (Parent_ID)
)

CREATE TABLE SERVICE_PROVIDER_DOCTOR
( 	SP_ESSN				CHAR(9)					NOT NULL,
    PRIMARY KEY(SP_ESSN),
    FOREIGN KEY (SP_ESSN) REFERENCES EMPLOYEE (ESSN)
)

CREATE TABLE TREATED
( 	ICD_10_PCS				INT					NOT NULL,
	Patient_ID				INT 				NOT NULL,
    PRIMARY KEY(ICD_10_PCS, Patient_ID),
    FOREIGN KEY (ICD_10_PCS) REFERENCES TREATMENT (ICD_10_PCS),
    FOREIGN KEY (Patient_ID) REFERENCES PATIENT (Patient_ID)
)


CREATE TABLE TREATMENT
( 	ICD_10_PCS				INT					NOT NULL,
	TName					VARCHAR(15),
    Cost					DECIMAL(10,2),
    PRIMARY KEY(ICD_10_PCS)
)

CREATE TABLE VISTS
(	Patient_ID			INT				NOT NULL,
	IC_ID				INT				NOT NULL,
    IC_ESSN				CHAR(9)			NOT NULL,
    Visit_Record		VARCHAR(15),
    Insurance_Record	VARCHAR(15),
    Cost				DECIMAL(10,2),
    Primary_Contact		VARCHAR(15),
    Copay				DECIMAL(10,2),
    Name				VARCHAR(15)		NOT NULL,
    Card_Num			INT				NOT NULL,
    Exp_Date			INT				NOT NULL,
    Security_Code		INT 			NOT NULL,
	PRIMARY KEY(Patient_ID,IC_ID,IC_ESSN),
	FOREIGN KEY(Patient_ID) REFERENCES PATIENT(Patient_ID),
    FOREIGN KEY(IC_ID) REFERENCES INSURANCE_COMPANY(IC_ID),
    FOREIGN KEY(IC_ESSN) REFERENCES INTAKE_CLERK(IC_ESSN)
)
